MAC地址由ARP协议获得

协议分层
MAC层
  IP层
    TCP/UDP层
      HTTP层
        内容层

第一层：物理层
	(原先or)网线可以电脑连电脑(插在两端的网卡上)，水晶头的第1、2和第3、6脚，它们分别起着收、发信号的作用。将一端的1号和3号线、2号和6号线互换一下位置，就能够在物理层实现一端发送的新号，另一端能收到。
	电脑连电脑，除了网线要交叉，还需要配置这两台电脑的IP地址、子网掩码和默认网关。这三项必须配置成为一个网络，否则是不通的
	IP层要封装了MAC层才能将包放入物理层
	三台电脑如何连在一起？Hub！也就是集线器。此设备有多个口，可将多台电脑连接起来。但是，和交换机不同，集线器没有大脑，它完全在物理层工作。它会将自己收到的每一个字节，都复制到其他端口上去。这是第一层物理层联通的方案

第二层：数据链路层
	物理层浮现的问题：Hub采取的是广播的模式(目前组网的基本设备之一Switch)，如果一台电脑发出的包，其它电脑都能收到，就麻烦了。这就需要解决几个问题：
	1.这个包是发给谁的？谁应该接收
	2.大家都在发，会不会产生混乱？有没有谁先发、谁后发的规则？
	3.如果发送的时候出现了错误，怎么办？
	以上为题都是第二层(数据链路层)，也即MAC层要解决的问题。MAC的全程是Medium Access Control,即媒体访问控制。它控制在往媒体上发数据的时候，谁先发、谁后发的问题。防止发生混乱。这个问题中的规则，学名叫多路访问。有很多算法可以解决这个问题。就像车管所管束马路上跑的车，能想的办法都想过了。比如以下三种方式：
	1.分多个车道。每车一个车道，各行其道。这在计算机网络里叫做信道划分
	2.单、双号轮流出行。这在计算机网络里叫做轮流协议
	3.不管三七二十一，有事儿先出门，发现特堵就回去。错过高峰再出。这叫随机接入协议。著名的以太网，用的就是这个方式
	接下来解决第一个问题：发给谁、谁接收？这里用到一个物理地址，叫做链路层地址。但是因为第二层主要解决媒体接入控制的问题，所以它常被称为MAC地址。解决第一个问题就牵扯到第二层的网络包格式。对于以太网，第二层的最开始，就是目标的MAC地址和源的MAC地址。接下来是类型，大部分的类型是IP数据包，然后IP里面包含TCP、UDP，以及HTTP等，这都是里层封装的事情。
	有了这个目标MAC地址，数据包在链路上广播，MAC的网卡才能发现，这个包是给它的。MAC的网卡把包收进来，然后打开IP包，发现匹配上了，再打开TCP包，发现端口是自己，也就是80，而nginx就是监听80.后取到内容后再利用源数据发回
	对于以太网，第二层的最后面是CRC--循环冗余检测。通过XOR异或的算法，来计算整个包是否在发送过程中出现错误，主要解决第三个问题。
	利用ARP协议--已知IP地址，求取MAC地址，为了避免频繁请求，会在本地进行ARP缓存，但是具有存活期
	交换机：把MAC头拿下来，检查一下目标MAC地址，然后根据策略转发的设备，它是个二层设备。交换机会记录哪个MAC地址是属于哪个设备端口的，它记录的结果成为转发表。但每个机器的IP地址会变，所在口也会变，因为转发表是有过期时间的。

	以上总结：
		1.MAC层是用来解决多路访问的堵车问题的
		2.ARP是通过“吼”的方式来寻找目标MAC地址的，吼完之后记住一段时间，这叫做缓存
		3.交换机是有MAC地址学习能力的，学完了它就知道谁在哪儿了，不用广播了

交换机与VLAN：
	1.当交换机的数目 越来越多的时候，会遭遇环路问题，让网络包迷路，这就需要使用STP(生成树协议),通过华山论剑的方式，将有环路的图变成没有环路的树，从而解决环路问题
	2.交换机数目多会面临隔离问题，可以通过VLAN形成虚拟局域网，从而解决广播问题和安全问题